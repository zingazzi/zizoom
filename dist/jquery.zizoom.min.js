!function(o){o.fn.zizoom=function(i){function s(s){s.css("position","relative").css("overflow","hidden");var e=s.data(i.dataElement),t=o('<img src="'+e+'">');return s.append(t),t.css("position","absolute").css("display","none"),t}function e(i){var s=o('<div class="zizoom--overlay"></div>');return i.append(s),s.css("position","absolute").css("display","none").css("top","0").css("left","0").css("z-index","11"),s}function t(o,i,s){w=o.width(),h=o.height(),i.width(w),i.height(h),s.width(w),s.height(h)}function n(o){o.css("display","block").css("z-index",10)}function c(o){o.css("display","block")}function a(o){o.css("display","none").css("z-index",0),$overlay.css("display","none")}function f(o,i,s,e){w=o.width(),h=o.height();var t=o.offset();offsetTop=t.top,offsetLeft=t.left,imgBigW=i.width()-w,imgBigH=i.height()-h,imgBigXPos=s*imgBigW/w*-1,imgBigYPos=e*imgBigH/h*-1,i.css("left",imgBigXPos).css("top",imgBigYPos)}function l(s){var e=o('<span class="'+i.zoomicon+'"></span>');return w=s.width(),h=s.height(),s.append(e),e.css("position","absolute").css("display","none").css("color",i.zoomcolor).css("left",w/2+e.width()/2*-1+"px").css("top",h/2+e.height()/2*-1+"px"),e}return i=o.extend({activate:"hover",dataElement:"zoom",zoomicon:"fa fa-search",zoomcolor:"#fff"},i),this.each(function(){var g=o(this),r=g.children("img");r.load(function(){$imgBig=s(g),$overlay=e(g),t(r,g,$overlay),"hover"==i.activate&&(g.mouseover(function(){n($imgBig),c($overlay),$overlay.mousemove(function(o){xpos=o.pageX-g.offset().left,ypos=o.pageY-g.offset().top,f(g,$imgBig,xpos,ypos)})}),g.mouseout(function(){a($imgBig,$overlay)})),"click"==i.activate&&($zoomicon=l(g),g.css("cursor","pointer"),g.on("click hover",function(i){n($imgBig),c($overlay),$overlay.mousemove(function(o){xpos=o.pageX-g.offset().left,ypos=o.pageY-g.offset().top,f(g,$imgBig,xpos,ypos)}),o(document).mousemove(function(o){console.log($overlay.is(":hover")),$overlay.is(":hover")===!1&&a($imgBig,$overlay)})}),g.mouseover(function(){$zoomicon.show()}).mouseout(function(){$zoomicon.hide()}))})}),this}}(jQuery);